{% extends "base.html.j2" %}

{% block title -%}
    {{ suite_name }} : {{ source_identifier }} vs {{ golden_identifier }}
{%- endblock %}

{% block content -%}

<h1>{{ suite_name }} : {{ source_identifier }} vs {{ golden_identifier }}</h1>

{% for result in results | sort(attribute='test_name') %}
    <h3>{{ result.test_name }}</h3>
    <div class="diff_distance">Difference {{ result.diff_distance }}</div>
    <div class="comparison-image-set">

    <div class="image-container">
    {% if result.diff_image_url %}
    <img src="{{ result.diff_image_url }}" alt="Diff result for {{ suite_name }}::{{ result.test_name }}" class="inline-image">
    {% else %}
    <div class="missing-image">No source result</div>
    {% endif %}
    </div>

    {% if result.source_image_url and result.golden_image_url %}
    <div class="image-pair">
        <div class="image-pair-title-bar">
            <div class="image-title" data-state="source"><a href="{{ result.source_image_url }}">Source</a></div>
            <div class="image-title" data-state="golden"><a href="{{ result.golden_image_url }}">Golden</a></div>
        </div>
        <img src="{{ result.source_image_url }}" alt="Source image for {{ suite_name }}::{{ result.test_name }}" class="image-comparison" data-state="source">
        <img src="{{ result.golden_image_url }}" alt="Golden image for {{ suite_name }}::{{ result.test_name }}" class="image-comparison" data-state="golden" style="display: none;">
    </div>
    {% elif result.source_image_url %}
    <div class="titled-image">
        <div class="image-title"><a href="{{ result.source_image_url }}">Source</a> - No golden result</div>
        <img src="{{ result.source_image_url }}" alt="Source image for {{ suite_name }}::{{ result.test_name }}">
    </div>
    {% elif result.golden_image_url %}
    <div class="titled-image">
        <div class="image-title"><a href="{{ result.golden_image_url }}">Golden</a> - No source result</div>
        <img src="{{ result.golden_image_url }}" alt="Golden image for {{ suite_name }}::{{ result.test_name }}">
    </div>
    {% endif %}

    </div>

{%- endfor -%}

{%- endblock %}
